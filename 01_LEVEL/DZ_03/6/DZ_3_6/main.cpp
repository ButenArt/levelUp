/*
Написать программу «Выход из лабиринта».
Правила такие:
1. Рисуете лабиринт — выходить за его границы нельзя.
2. Рисуете выход и «себя».
3. При достижении собой выхода — игра заканчивается.
4. Управление стрелками
 */
// = s %

#include <math.h>
#include <stdio.h>
#include <conio.h>

int a[25][21] =  {{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,},
                  {1,7,1,0,0,1,0,1,0,0,0,1,1,1,1,0,0,0,0,1,},
                  {1,0,1,1,0,1,0,1,0,1,0,0,0,0,1,0,1,1,0,1,},
                  {1,0,0,0,0,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,},
                  {1,1,1,1,1,1,0,1,0,1,0,0,1,0,1,1,0,1,0,1,},
                  {1,0,0,1,0,0,0,0,0,1,1,0,0,0,0,0,0,1,0,1,},
                  {1,0,1,1,0,1,1,1,1,1,0,0,1,0,1,1,1,1,0,1,},
                  {1,0,0,0,0,0,0,0,0,1,1,1,1,0,1,0,0,0,0,1,},
                  {1,1,1,1,1,1,0,1,1,1,0,0,0,0,1,0,1,1,1,1,},
                  {1,1,0,0,0,1,0,0,1,1,0,1,1,1,1,0,0,0,0,1,},
                  {1,0,0,1,0,0,0,0,0,1,0,0,0,0,1,1,1,1,0,1,},
                  {1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,0,0,0,1,},
                  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,},
                  {1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,},
                  {1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,0,1,},
                  {1,0,1,1,1,1,1,0,1,0,1,1,1,0,1,0,0,0,0,1,},
                  {1,0,1,0,0,0,1,0,1,0,0,0,1,1,1,1,1,1,1,1,},
                  {1,0,1,0,1,0,1,0,1,0,1,0,0,0,0,0,0,0,0,1,},
                  {1,0,1,0,1,0,1,0,1,0,1,1,1,1,1,1,1,1,0,1,},
                  {1,1,1,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,1,},
                  {1,0,1,0,1,0,0,0,1,0,1,1,1,1,1,1,0,1,0,1,},
                  {1,0,0,0,1,1,1,1,1,0,1,0,1,0,0,0,0,1,0,1,},
                  {1,0,1,0,0,1,0,0,1,0,1,0,1,0,1,1,0,1,0,1,},
                  {1,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,3,1,},
                  {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,}};
int x = 1; //x и y координатa X
int y = 1;

void lab()
{
    for (int i = 0; i < 25; ++i)
    {
        for (int j = 0; j < 20; ++j)
        {
            int k = 177;
            if (a[i][j]==0)
                printf("%s", " ");
            if (a[i][j]==1)
                printf("%c",k); //"|"
            //if (a[i][j]==2)
            //    printf("%s", "-");
            if (a[i][j]==3)
                printf("%s", "O");
            if (a[i][j]==7)
                printf("%s", "X");
            //if (a[i][j]==9)
            //    printf("%s", "*");
        }
        printf("\n");
    }
}
void go()
{
    int m;
    a[x][y] = 7;
    m = getch();

    switch (m)                                                  // обрабатываем ход
    {
    case 72 :                                                  // ход вверх
        --x;
        if (a[x][y]==0)
        {
            if (a[x][y]==3)
            {
                a[x][y] = 3;
                break;
            }
        a[x][y] = 7;
        a[x+1][y] = 0;
        system("cls");
        lab();
        break;
        }
        else
        {
            ++x;
            break;
        }

    case 80 :                                                  // ход ввниз
        ++x;
        if (a[x][y]==0 || a[x][y]==3)
        {
            if (a[x][y]==3)
            {
                a[x][y] = 3;
                break;
            }
        a[x][y] = 7;
        a[x-1][y] = 0;
        system("cls");
        lab();
        break;
        }
        else
        {
            --x;
            break;
        }
    case 75 :                                                  // ход влево
        --y;
        if (a[x][y]==0)
        {
            if (a[x][y]==3)
            {
                a[x][y] = 3;
                break;
            }
        a[x][y] = 7;
        a[x][y+1] = 0;
        system("cls");
        lab();
        break;
        }
        else
        {
            ++y;
            break;
        }
    case 77 :                                                  // ход вправо
        ++y;
        if (a[x][y]==0)
        {
            if (a[x][y]==3)
            {
                a[x][y] = 3;
                break;
            }
        a[x][y] = 7;
        a[x][y-1] = 0;
        system("cls");
        lab();
        break;
        }
        else
        {
            --y;
            break;
        }
    }
}


int main()
{
    lab();
       while (a[x][y] != 3)                     // пока не выиграл
       {
           go();
       }
    printf("\n\nWIN!!!!\n\n");
    return 0;
}
