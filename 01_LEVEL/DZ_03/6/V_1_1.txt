/*
Написать программу «Выход из лабиринта».
Правила такие:
1. Рисуете лабиринт — выходить за его границы нельзя.
2. Рисуете выход и «себя».
3. При достижении собой выхода — игра заканчивается.
4. Управление стрелками
 */
// = s %

#include <math.h>
#include <stdio.h>

int a[25][21] =  {{9,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,9,},
                  {1,0,1,0,0,1,0,1,0,0,0,4,4,4,4,0,0,0,0,1,},
                  {1,0,1,4,0,1,0,1,0,1,0,0,0,0,1,0,1,4,0,1,},
                  {1,0,0,0,0,0,0,1,0,1,4,4,1,0,1,0,0,1,0,1,},
                  {1,1,1,1,1,1,0,1,0,1,0,0,1,0,1,1,0,1,0,1,},
                  {1,0,0,1,0,0,0,0,0,1,1,0,0,0,0,0,0,1,0,1,},
                  {1,0,1,1,0,1,1,1,1,1,0,0,1,0,1,1,1,1,0,1,},
                  {1,0,0,0,0,0,0,0,0,1,1,1,1,0,1,0,0,0,0,1,},
                  {1,1,1,1,1,1,0,1,1,1,0,0,0,0,1,0,1,1,1,1,},
                  {1,1,0,0,0,1,0,0,1,1,0,1,1,1,1,0,0,0,0,1,},
                  {1,0,0,1,0,0,0,0,0,1,0,0,0,0,1,1,1,1,0,1,},
                  {1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,0,0,0,1,},
                  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,},
                  {1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,},
                  {1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,0,1,},
                  {1,0,1,1,1,1,1,0,1,0,1,1,1,0,1,0,0,0,0,1,},
                  {1,0,1,0,0,0,1,0,1,0,0,0,1,1,1,1,1,1,1,1,},
                  {1,0,1,0,1,0,1,0,1,0,1,0,0,0,0,0,0,0,0,1,},
                  {1,0,1,0,1,0,1,0,1,0,1,1,1,1,1,1,1,1,0,1,},
                  {1,1,1,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,1,},
                  {1,0,1,0,1,0,0,0,1,0,1,1,1,1,1,1,0,1,0,1,},
                  {1,0,0,0,1,1,1,1,1,0,0,0,1,0,1,0,0,1,0,1,},
                  {1,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,1,},
                  {1,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,3,1,},
                  {9,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,9,}};
int x = 1; //x и y координатa X
int y = 1;

void lab()
{
    for (int i = 0; i < 25; ++i)
    {
        for (int j = 0; j < 20; ++j)
        {
            if (a[i][j]==0)
                printf("%s", " ");
            if (a[i][j]==1)
                printf("%s", "|");
            if (a[i][j]==2)
                printf("%s", "-");
            if (a[i][j]==3)
                printf("%s", "O");
            if (a[i][j]==4)
                printf("%s", "_");
            if (a[i][j]==7)
                printf("%s", "X");
            if (a[i][j]==9)
                printf("%s", "*");
        }
        printf("\n");
    }
}
void go()
{
    char m;
    a[x][y] = 7;
    //nonblock(1); // отключаем буферизованый ввод
    m = getchar(); // куда хочет пойти человек?

    switch (m)                                                  // обрабатываем ход
    {
    case '8' :
        if (a[x][y]==0)
        {
        a[x][y] = 7;
        x--;
        }
        
        break;
    case '2' :
        x++;
        break;
    case '4' :
        y--;
        break;
    case '6' :
        y++;
        break;
    }
    if (a[x][y]==0)
        a[x][y] = 7;
    else                                                        // а если стенка ?
        {
            switch (m)
            {
            case '8' :
                x--;
                break;
            case '2' :
                x++;
                break;
            case '4' :
                y--;
                break;
            case '6' :
                y++;
                break;
            }
        a[x][y] = 7;
       }
}


int main()
{
       while (a[x][y] != 3)                     // пока не выиграл
       {
           lab();
           go();
       }
    printf("\n\nWIN!!!!");
    return 0;
}
